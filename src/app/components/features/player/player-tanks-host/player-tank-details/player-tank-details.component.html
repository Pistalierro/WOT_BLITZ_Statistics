<div *ngIf="tanksService.tankFullInfo() as tank" class="container">
  <h3 [ngStyle]="{'color': utilsService.getTankColor(tank)}" class="container-title">{{ tank.name }}</h3>
  <section class="tank-characteristics container-grid">

    <!-- üîπ –û–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
    <article class="tank-summary">
      <mat-card appearance="outlined" class="card">
        <!--        <mat-card-title class="card-title">–û–±—â–∏–µ</mat-card-title>-->
        <div class="card-header-container">
          <div [ngStyle]="{'background-image': 'url(' + getFlagUrl(tank.nation) + ')'}" class="card-header__background">
            <img [alt]="tank.name" [src]="tank.images.normal" class="card-header__image">
            <p [style.color]="utilsService.getTankColor(tank) + ' !important'" class="card-header__item card-header__item--tier ">
              {{ toRoman(tank.tier) }}
            </p>
            <img [alt]="tank.type" [src]="tankTypes(tank.type, tank)" class="card-header__item card-header__item--type">
            <p [style.color]="utilsService.getTankColor(tank) + ' !important'" class="card-header__item card-header__item--name">
              {{ tank.name }}
            </p>
          </div>
        </div>
        <mat-card-content class="card-content">
          <p class="card-content__title">–ö—Ä–∞—Ç–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</p>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–ü—Ä–æ—á–Ω–æ—Å—Ç—å:</p>
              <p class="content-row__value">{{ tank.hp }}</p>
            </div>
            <mat-progress-bar [value]="statsPercent['hp']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–†–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω:</p>
              <p class="content-row__value">{{ tank.shells[0].damage }}</p>
            </div>
            <mat-progress-bar [value]="statsPercent['damage']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–°–∫–æ—Ä–æ—Å—Ç—Ä–µ–ª—å–Ω–æ—Å—Ç—å:</p>
              <p class="content-row__value">{{ tank.gun.fire_rate }}–≤—Å/–º</p>
            </div>
            <mat-progress-bar [value]="statsPercent['fire_rate']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–ü—Ä–æ–±–∏—Ç–∏–µ:</p>
              <p class="content-row__value">{{ tank.shells[0].penetration }}–º–º</p>
            </div>
            <mat-progress-bar [value]="statsPercent['penetration']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–°–∫–æ—Ä–æ—Å—Ç—å:</p>
              <p class="content-row__value">{{ tank.speed_forward }}–∫–º/—á</p>
            </div>
            <mat-progress-bar [value]="statsPercent['speed']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
          <div class="content-item">
            <div class="content-row">
              <p class="content-row__title">–í—Ä–∞—â–µ–Ω–∏–µ:</p>
              <p class="content-row__value">{{ tank.suspension.traverse_speed }}¬∞/—Å</p>
            </div>
            <mat-progress-bar [value]="statsPercent['traverse']" class="content-row__progress" mode="determinate"></mat-progress-bar>
          </div>
        </mat-card-content>
      </mat-card>
    </article>

    <!-- üîπ –°–Ω–∞—Ä—è–¥—ã -->
    <article class="tank-ammo">
      <mat-card appearance="outlined" class="card">
        <mat-card-title class="card-title">–°–Ω–∞—Ä—è–¥—ã</mat-card-title>
        <div class="card-image">
          <img alt="–û—Ä—É–¥–∏–µ" mat-card-image src="/images/tanks/ammo.webp">
        </div>
        <mat-card-content class="card-content">
          <div class="card-content-ammo">
            <p class="card-content__title">–£—Ä–æ–Ω</p>
            <div *ngFor="let shell of tank.shells" class="card-content-row">
              <p class="card-content-row__title">{{ getShellType(shell.type) }}</p>
              <p class="card-content-row__value">{{ shell.damage }}</p>
            </div>
          </div>
          <div class="card-content-ammo">
            <p class="card-content-ammo__title">–ü—Ä–æ–±–∏—Ç–∏–µ</p>
            <div *ngFor="let shell of tank.shells" class="card-content-row">
              <p class="card-content-row__title">{{ getShellType(shell.type) }}</p>
              <p class="card-content-row__value">{{ shell.penetration }} –º–º</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </article>

    <!-- üîπ –û—Ä—É–¥–∏–µ -->
    <article class="tank-gun">
      <mat-card appearance="outlined" class="card">
        <mat-card-title class="card-title">–û—Ä—É–¥–∏–µ</mat-card-title>
        <div class="card-image">
          <img alt="–û—Ä—É–¥–∏–µ" mat-card-image src="/images/tanks/gun.webp">
        </div>
        <mat-card-content class="card-content">
          <div class="card-content-row">
            <p class="card-content-row__title">–ù–∞–∑–≤–∞–Ω–∏–µ:</p>
            <p class="card-content-row__value">{{ tank.gun.name }}</p>
          </div>
          <div class="card-content-row">
            <p class="card-content-row__title">–ö–∞–ª–∏–±—Ä:</p>
            <p class="card-content-row__value">{{ tank.gun.caliber }} –º–º</p>
          </div>
          <div class="card-content-row">
            <p class="card-content-row__title">{{ tank.gun.clip_capacity > 1 ? '–ö/–î –±–∞—Ä–∞–±–∞–Ω–∞' : '–ö/–î:' }}</p>
            <p class="card-content-row__value">{{ tank.gun.reload_time }} —Å–µ–∫</p>
          </div>
          <!-- ‚úÖ –î–ª—è –±–∞—Ä–∞–±–∞–Ω–Ω—ã—Ö —Ç–∞–Ω–∫–æ–≤ -->
          <div *ngIf="tank.gun.clip_capacity > 1">
            <div class="card-content-row">
              <p class="card-content-row__title">–°–Ω–∞—Ä—è–¥–æ–≤ –≤ –±–∞—Ä–∞–±–∞–Ω–µ:</p>
              <p class="card-content-row__value">{{ tank.gun.clip_capacity }}</p>
            </div>
            <div class="card-content-row">
              <p class="card-content-row__title">–ö/–î –≤–Ω—É—Ç—Ä–∏ –±–∞—Ä–∞–±–∞–Ω–∞:</p>
              <p class="card-content-row__value">{{ tank.gun.clip_reload_time }} —Å–µ–∫</p>
            </div>
          </div>

          <div class="card-content-row">
            <p class="card-content-row__title">–°–≤–µ–¥–µ–Ω–∏–µ:</p>
            <p class="card-content-row__value">{{ tank.gun.aim_time }} —Å–µ–∫</p>
          </div>

          <div class="card-content-row">
            <p class="card-content-row__title">–¢–æ—á–Ω–æ—Å—Ç—å:</p>
            <p class="card-content-row__value">{{ tank.gun.dispersion }} –º</p>
          </div>

          <div class="card-content-row">
            <p class="card-content-row__title">–£–í–ù –≤–Ω–∏–∑:</p>
            <p class="card-content-row__value">{{ tank.gun.move_down_arc }}¬∞</p>
          </div>

          <div class="card-content-row">
            <p class="card-content-row__title">–£–í–ù –≤–≤–µ—Ä—Ö:</p>
            <p class="card-content-row__value">{{ tank.gun.move_up_arc }}¬∞</p>
          </div>

          <div class="card-content-row">
            <p class="card-content-row__title">–°–∫–æ—Ä–æ—Å—Ç—Ä–µ–ª—å–Ω–æ—Å—Ç—å:</p>
            <p class="card-content-row__value">{{ tank.gun.fire_rate }} –≤—Å/–º</p>
          </div>
        </mat-card-content>
      </mat-card>
    </article>

    <!-- üîπ –ë–∞—à–Ω—è -->
    <article class="tank-turret">
      <mat-card class="card">
        <mat-card-title class="card-title">–ë–∞—à–Ω—è</mat-card-title>
        <div class="card-image">
          <img alt="–ë–∞—à–Ω—è" mat-card-image src="/images/tanks/turret.webp">
        </div>
        <mat-card-content class="card-content">

          <!-- üîπ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞—à–Ω–∏ -->
          <div *ngIf="tank.armor?.turret">
            <div *ngIf="tank.armor.turret.front && tank.armor.turret.front > 0" class="card-content-row">
              <p class="card-content-row__title">–ë—Ä–æ–Ω—è –ª–æ–±:</p>
              <p class="card-content-row__value">{{ tank.armor.turret.front }} –º–º</p>
            </div>
            <div *ngIf="tank.armor.turret.sides && tank.armor.turret.sides > 0" class="card-content-row">
              <p class="card-content-row__title">–ë—Ä–æ–Ω—è –±–æ—Ä—Ç–∞:</p>
              <p class="card-content-row__value">{{ tank.armor.turret.sides }} –º–º</p>
            </div>
            <div *ngIf="tank.armor.turret.rear && tank.armor.turret.rear > 0" class="card-content-row">
              <p class="card-content-row__title">–ë—Ä–æ–Ω—è –∫–æ—Ä–º–∞:</p>
              <p class="card-content-row__value">{{ tank.armor.turret.rear }} –º–º</p>
            </div>
          </div>


          <!-- üîπ –ï—Å–ª–∏ —É —Ç–∞–Ω–∫–∞ –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –±–∞—à–Ω—è (—Ç—É—Ä–µ–ª—å –ù–ï `null`), –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞ -->
          <div *ngIf="tank.turret_id !== null && tank.turret">
            <div class="card-content-row">
              <p class="card-content-row__title">–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞ –±–∞—à–Ω–∏:</p>
              <p class="card-content-row__value">{{ tank.turret.traverse_speed }}¬∞/—Å</p>
            </div>
          </div>

          <!-- üîπ –ï—Å–ª–∏ —É —Ç–∞–Ω–∫–∞ –ù–ï–¢ –±–∞—à–Ω–∏ (–ü–¢-–°–ê–£ –±–µ–∑ –±–∞—à–Ω–∏), –Ω–æ turret —Å—É—â–µ—Å—Ç–≤—É–µ—Ç -->
          <div *ngIf="tank.turret_id === null && tank.turret">
            <!-- üîπ –ï—Å–ª–∏ –ü–¢-–°–ê–£ –±–µ–∑ –±–∞—à–Ω–∏, –Ω–æ –ø–æ–≤–æ—Ä–æ—Ç –±–æ–ª—å—à–µ 20¬∞ - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ –±–∞—à–Ω–∏ -->
            <div *ngIf="tank.turret.traverse_left_arc !== undefined && tank.turret.traverse_right_arc !== undefined
           && tank.turret.traverse_left_arc > 20 && tank.turret.traverse_right_arc > 20">
              <div class="card-content-row">
                <p class="card-content-row__title">–ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ:</p>
                <p class="card-content-row__value">{{ tank.turret.traverse_left_arc }}¬∞</p>
              </div>
              <div class="card-content-row">
                <p class="card-content-row__title">–ü–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ:</p>
                <p class="card-content-row__value">{{ tank.turret.traverse_right_arc }}¬∞</p>
              </div>
            </div>

            <!-- üîπ –ï—Å–ª–∏ –ü–¢-–°–ê–£ –±–µ–∑ –±–∞—à–Ω–∏ –∏ —É–≥–æ–ª ‚â§ 20¬∞ - –£–ì–ù -->
            <div *ngIf="tank.turret.traverse_left_arc !== undefined && tank.turret.traverse_right_arc !== undefined
           && tank.turret.traverse_left_arc <= 20 && tank.turret.traverse_right_arc <= 20">
              <div class="card-content-row">
                <p class="card-content-row__title">–£–ì–ù –≤–ª–µ–≤–æ:</p>
                <p class="card-content-row__value">{{ tank.turret.traverse_left_arc }}¬∞</p>
              </div>
              <div class="card-content-row">
                <p class="card-content-row__title">–£–ì–ù –≤–ø—Ä–∞–≤–æ:</p>
                <p class="card-content-row__value">{{ tank.turret.traverse_right_arc }}¬∞</p>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </article>
  </section>
</div>
